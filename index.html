<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World - Rust</title>
  </head>
  <body>
    <script type="module">
      import init, {parse_flow} from './pkg/flowrs_wasm.js'

      // Always required for wasm
      await init();

      let json = `{
            "threads": 3,
            "duration": 3, 
            "nodes": [
                {
                    "name": "lhs",
                    "kind": "nodes.basic",
                    "props": "string"
                },
                {
                    "name": "rhs",
                    "kind": "nodes.basic",
                    "props": 30
                },
                {
                    "name": "add",
                    "kind": "nodes.arithmetics.add",
                    "props": {"none": "Undefined"}
                },
                {
                    "name": "debug",
                    "kind": "nodes.debug",
                    "props": {"none": "Undefined"}
                }
            ],
            "edges": [
                {
                    "source": {"node": "lhs", "index": 0},
                    "dest": {"node": "add", "index": 0}
                },
                {
                    "source": {"node": "rhs", "index": 0},
                    "dest": {"node": "add", "index": 1}
                },
                {
                    "source": {"node": "add", "index": 0},
                    "dest": {"node": "debug", "index": 0}
                }
            ]
        }`

      // Calling my first routine
      parse_flow(json);
    </script>
  </body>
</html>
